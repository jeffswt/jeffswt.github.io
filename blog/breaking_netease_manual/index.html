<!DOCTYPE HTML>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="theme-color" content="#292d35">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>粉碎你的使用说明书&nbsp;&nbsp;|&nbsp;&nbsp;jeffswt: the ac moments</title>
  <link rel="shortcut icon" href="/assets/images/favicon.png">

  <link rel="stylesheet" href="/assets/main.css">
  <link rel="stylesheet" href="/assets/font-awesome.css">
  <link rel="stylesheet" href="/assets/katex/katex.css">
  <link rel="stylesheet" href="/assets/gitment/gitment.css">
</head>

<body>
  <div class="topbar">
    <div class="bar">
      <span class="avatar-icon"><svg version="1.1" height="40px" version="1.1" viewBox="0 0 48 48" width="40px">
        <polygon points="-0.5,16 -0.5,37 0.5,34 0.5,32 1.5,28.8 1.5,24 1.5,21 2.5,17.6 2.5,16 1,14.9 "/>
        <polygon points="44,0.5 45,0.5 46.1,1.1 46.9,1.9 47.2,2.8 47.5,4.8 47.5,7 48,43.8 47.6,45.8 46.4,47.6
        	44.8,48.5 38,48.5 36.8,47.2 36.1,46.1 34.2,44.7 32.6,43.5 31.1,40.8 29.5,38.8 27.8,35.9 26.9,35.4 29.5,35.3 32.7,28.4
        	31.4,27.8 28.7,33.8 26.9,34.1 25.7,33.3 23.5,33.4 21,32.8 19.3,32.2 18.3,30.4 17.3,27.3 19.3,27.9 20.8,26.6 20.4,25.3 21.3,24
        	22.2,23 20.3,21.3 17.8,20.8 16.2,21.5 15.5,23 15.5,25 14.4,26 12.8,26.6 11.2,29.2 10.6,31.1 11.2,34.3 10.9,37.7 11,39.5
        	11.8,42.3 9.5,39.6 8.6,37 7.8,35.1 7.1,33.4 6.6,31 6,28.1 5.6,23.5 6.2,21.8 5.6,19.3 6.3,18.1 8.4,17 10.8,14.5 13,14.5
        	15.8,16.5 19,16.5 22.2,14.3 24,15 25.4,13.5 29,13.5 32.3,12.3 34.5,11.3 36,10.5 36.4,9 39.3,8.8 40.1,7.5 42,7.5 43.6,6.9
        	44,5.3 44.8,3.9 45.2,2.7 "/>
        <polygon points="17.5,34 17.5,37 18.2,37.5 22.8,35.4 21.1,34.7 17.9,34 "/>
        <polygon points="19,43.1 20.6,42.4 22.1,41.4 24,39.5 25,39.5 26.8,41.3 29.3,44.6 24,43.3 "/>
      </svg></span>
      <span class="site-title"><a class="site-title-href" href="/blog/">
        jeffswt: the ac moments
      </a></span>
    </div>
  </div>
  <div class="site-content">
    <div class="blog-post" lang="zh">
      <div class="post-header">
        <h1 class="title">
          粉碎你的使用说明书
        </h1>
        <span class="tags">
          <a class="tag" href="/blog/archive/?q=Reverse Engineering" target="_self">
            <i class="fa fa-tag"></i> Reverse Engineering
          </a>
          <a class="tag" href="/blog/archive/?q=JavaScript" target="_self">
            <i class="fa fa-tag"></i> JavaScript
          </a>
        </span>
        <span class="date" title="12:20:31 | 31 July, 2018">
          31 July, 2018
        </span>
      </div>
      <div class="post-content">
        <p>前几天被别人安利了这个玩意儿 (<em>(制作你的说明书</em>), 打算看看到底是什么货色</p>
<p>其实被各种社交网站刮风搞得有点谜了, 但是看巨佬 <span class="citation" data-cites="xmcp"> @xmcp</span> 有一段时间一刮风就去挖人家老底的操作还是很羡慕的, 所以这次就跟一波风批判一下搞出这个<em>使用书生成器</em>的网易云音乐</p>
<figure>
<img class="thumb" data-small="/blog/breaking_netease_manual/nemnbr-preview-small.jpg" data-src="/blog/breaking_netease_manual/nemnbr-preview.png" data-thumb="/blog/breaking_netease_manual/nemnbr-preview-thumb.jpg" src="/blog/breaking_netease_manual/nemnbr-preview-thumb.jpg" title="" width="417px"/>
<figcaption>
</figcaption>
</figure>
<p>网址链接中间有一个随机 ID, 多半是用来检测是谁分享的链接用的, 现在把一个 sample 挂在这里:<a class="uri" href="https://st.music.163.com/c/m2-spec/1abCDEFghi/index.html">https://st.music.163.com/c/m2-spec/1abCDEFghi/index.html</a></p>
<!-- More -->
<h2 id="万年不变的pc歧视">万年不变的 PC 歧视</h2>
<p>首先是各种防止电脑用户登陆, 不过这里可以 override 一个 User-Agent 直接 bypass 掉:<code>Mozilla/5.0 (Linux; Android 6.0; Nexus 5 Build/MRA58N) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/67.0.3396.99 Mobile Safari/537.36</code></p>
<figure>
<img class="thumb" data-small="/blog/breaking_netease_manual/nemnbr-pc-denial-small.jpg" data-src="/blog/breaking_netease_manual/nemnbr-pc-denial.png" data-thumb="/blog/breaking_netease_manual/nemnbr-pc-denial-thumb.jpg" src="/blog/breaking_netease_manual/nemnbr-pc-denial-thumb.jpg" title="深深地体会到了PC用户受到的歧视" width="869px"/>
<figcaption>
深深地体会到了PC用户受到的歧视
</figcaption>
</figure>
<p>(果然只是检测 User-Agent 呢)</p>
<p>(常规操作系列)</p>
<h2 id="蜜汁响应式布局界面">蜜汁响应式布局界面</h2>
<p>这里多半是没考虑到窄屏用户 (没错, 说的就是你, 刘海屏) 或者宽屏用户的需求, 所以一旦把布局拉到立式宽屏之外的范围画面直接崩坏...... 当然, 有一个起码的响应式布局我们还是要称赞一发的 (雾)</p>
<figure>
<img class="thumb" data-small="/blog/breaking_netease_manual/nemnbr-responsive-wide-small.jpg" data-src="/blog/breaking_netease_manual/nemnbr-responsive-wide.png" data-thumb="/blog/breaking_netease_manual/nemnbr-responsive-wide-thumb.jpg" src="/blog/breaking_netease_manual/nemnbr-responsive-wide-thumb.jpg" title="宽屏用户不会受伤" width="959px"/>
<figcaption>
宽屏用户不会受伤
</figcaption>
</figure>
<figure>
<img class="thumb" data-small="/blog/breaking_netease_manual/nemnbr-responsive-narrow-small.jpg" data-src="/blog/breaking_netease_manual/nemnbr-responsive-narrow.png" data-thumb="/blog/breaking_netease_manual/nemnbr-responsive-narrow-thumb.jpg" src="/blog/breaking_netease_manual/nemnbr-responsive-narrow-thumb.jpg" title="刘海屏的字体大小果然有问题" width="959px"/>
<figcaption>
刘海屏的字体大小果然有问题
</figcaption>
</figure>
<p>另外顺便吐槽一下直接把文字嵌在图片里的操作 (不过这确实避免了不少布局问题)</p>
<h2 id="off-topic-机智的-react-作者">Off-topic: 机智的 React 作者</h2>
<p>在 <code>vendor.ac146652.js</code> 里面放的大概是 React 框架, 不过感觉 React 的开发组很皮 (不是我开玩笑, 是真的很皮)</p>
<div class="sourceCode"><pre class="sourceCode js"><code class="sourceCode javascript"><span class="co">// Lines 10442 - 10445</span>
Vr <span class="op">=</span> <span class="va">bn</span>.<span class="va">__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED</span>.<span class="at">ReactCurrentOwner</span><span class="op">,</span>
zr <span class="op">=</span> []<span class="op">,</span>
Br <span class="op">=</span> <span class="op">!</span><span class="dv">0</span><span class="op">,</span>
Wr <span class="op">=</span> <span class="kw">void</span> <span class="dv">0</span><span class="op">,</span>
<span class="co">// Lines 11355 - 11366</span>
unstable_createPortal<span class="op">:</span> yn<span class="op">,</span>
unstable_batchedUpdates<span class="op">:</span> Z<span class="op">,</span>
unstable_deferredUpdates<span class="op">:</span> <span class="va">ci</span>.<span class="at">deferredUpdates</span><span class="op">,</span>
flushSync<span class="op">:</span> <span class="va">ci</span>.<span class="at">flushSync</span><span class="op">,</span>
__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED<span class="op">:</span> <span class="op">{</span>
    <span class="dt">EventPluginHub</span><span class="op">:</span> rr<span class="op">,</span>
    <span class="dt">EventPluginRegistry</span><span class="op">:</span> Xn<span class="op">,</span>
    <span class="dt">EventPropagators</span><span class="op">:</span> cr<span class="op">,</span>
    <span class="dt">ReactControlledComponent</span><span class="op">:</span> Nr<span class="op">,</span>
    <span class="dt">ReactDOMComponentTree</span><span class="op">:</span> ur<span class="op">,</span>
    <span class="dt">ReactDOMEventListener</span><span class="op">:</span> Kr
<span class="op">}</span>
<span class="co">// Lines 11655 - 11660</span>
isValidElement<span class="op">:</span> l<span class="op">,</span>
version<span class="op">:</span> <span class="st">"16.2.0"</span><span class="op">,</span>
__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED<span class="op">:</span> <span class="op">{</span>
    <span class="dt">ReactCurrentOwner</span><span class="op">:</span> M<span class="op">,</span>
    <span class="dt">assign</span><span class="op">:</span> m
<span class="op">}</span></code></pre></div>
<p>用了这个参数就会被炒鱿鱼吗......</p>
<h2 id="探究测试的机理">探究测试的机理</h2>
<p>业务代码一共有 23336 行, 我数过了, 但是感觉都是机器生成的...... 大概</p>
<ol type="1">
<li><a class="uri" href="vendor.ac146652.js">vendor.ac146652.js</a></li>
<li><a class="uri" href="vendor.ac146652.deobfs.js">vendor.ac146652.deobfs.js</a></li>
<li><a class="uri" href="bundle.3f3bfd35.js">bundle.3f3bfd35.js</a></li>
<li><a class="uri" href="bundle.3f3bfd35.deobfs.js">bundle.3f3bfd35.deobfs.js</a></li>
</ol>
<h3 id="提交名称">提交名称</h3>
<div class="sourceCode"><pre class="sourceCode js"><code class="sourceCode javascript"><span class="co">// Lines 12245 - 12291</span>
value<span class="op">:</span> <span class="kw">function</span> () <span class="op">{</span>
    <span class="kw">var</span> e <span class="op">=</span> <span class="kw">this</span>.<span class="at">props</span><span class="op">,</span>
        t <span class="op">=</span> <span class="va">e</span>.<span class="at">handleNameChange</span><span class="op">,</span>
        A <span class="op">=</span> <span class="va">e</span>.<span class="at">handleNextCard</span><span class="op">,</span>
        n <span class="op">=</span> <span class="kw">this</span>.<span class="va">state</span>.<span class="at">userName</span><span class="op">;</span>
    <span class="cf">if</span> (<span class="op">!</span>n) <span class="cf">return</span> <span class="kw">void</span>(<span class="dv">0</span><span class="op">,</span> <span class="va">h</span>.<span class="at">ShowToast</span>)(<span class="op">{</span>
            <span class="dt">key</span><span class="op">:</span> <span class="st">"empty"</span><span class="op">,</span>
            <span class="dt">type</span><span class="op">:</span> <span class="st">"center"</span><span class="op">,</span>
            <span class="dt">isOk</span><span class="op">:</span> <span class="op">!</span><span class="dv">1</span><span class="op">,</span>
            <span class="dt">text</span><span class="op">:</span> <span class="st">"请先输入名字"</span><span class="op">,</span>
            <span class="dt">autoClose</span><span class="op">:</span> <span class="op">!</span><span class="dv">0</span>
        <span class="op">}</span>)<span class="op">;</span>
    <span class="cf">for</span> (<span class="kw">var</span> r <span class="op">=</span> <span class="dv">0</span><span class="op">,</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> <span class="va">n</span>.<span class="at">length</span><span class="op">;</span> i<span class="op">++</span>) <span class="va">g</span>.<span class="at">test</span>(n[i]) <span class="op">?</span> r <span class="op">+=</span> <span class="dv">2</span> : r<span class="op">++;</span>
    <span class="cf">if</span> (r <span class="op">&gt;</span> <span class="dv">16</span>) <span class="cf">return</span> <span class="kw">void</span>(<span class="dv">0</span><span class="op">,</span> <span class="va">h</span>.<span class="at">ShowToast</span>)(<span class="op">{</span>
            <span class="dt">key</span><span class="op">:</span> <span class="st">"empty"</span><span class="op">,</span>
            <span class="dt">type</span><span class="op">:</span> <span class="st">"center"</span><span class="op">,</span>
            <span class="dt">isOk</span><span class="op">:</span> <span class="op">!</span><span class="dv">1</span><span class="op">,</span>
            <span class="dt">text</span><span class="op">:</span> <span class="st">"请不要超过8个字哦"</span><span class="op">,</span>
            <span class="dt">autoClose</span><span class="op">:</span> <span class="op">!</span><span class="dv">0</span>
        <span class="op">}</span>)<span class="op">;</span>
    <span class="kw">var</span> o <span class="op">=</span> (<span class="dv">0</span><span class="op">,</span> <span class="va">d</span>.
    <span class="im">default</span>)(<span class="st">"/api/activity/antispam/keyword/nickname/check"</span><span class="op">,</span> <span class="op">{</span>
            <span class="dt">method</span><span class="op">:</span> <span class="st">"post"</span><span class="op">,</span>
            <span class="dt">async</span><span class="op">:</span> <span class="op">!</span><span class="dv">1</span><span class="op">,</span>
            <span class="dt">data</span><span class="op">:</span> <span class="op">{</span>
                <span class="dt">content</span><span class="op">:</span> n
            <span class="op">}</span>
        <span class="op">}</span>)<span class="op">;</span>
    <span class="cf">try</span> <span class="op">{</span>
            o <span class="op">=</span> <span class="va">JSON</span>.<span class="at">parse</span>(<span class="va">o</span>.<span class="va">request</span>.<span class="at">responseText</span>)
        <span class="op">}</span> <span class="cf">catch</span> (e) <span class="op">{</span>
            <span class="va">console</span>.<span class="at">log</span>(e)
        <span class="op">}</span>
    o <span class="op">&amp;&amp;</span> <span class="va">o</span>.<span class="at">data</span> <span class="op">?</span> (<span class="at">t</span>(n)<span class="op">,</span> <span class="at">A</span>()) : o <span class="op">&amp;&amp;</span> <span class="dv">0</span> <span class="op">==</span> <span class="va">o</span>.<span class="at">data</span> <span class="op">||</span> o <span class="op">&amp;&amp;</span> <span class="dv">407</span> <span class="op">==</span> <span class="va">o</span>.<span class="at">code</span> <span class="op">?</span> (<span class="dv">0</span><span class="op">,</span> <span class="va">h</span>.<span class="at">ShowToast</span>)(<span class="op">{</span>
            <span class="dt">key</span><span class="op">:</span> <span class="st">"empty"</span><span class="op">,</span>
            <span class="dt">type</span><span class="op">:</span> <span class="st">"center"</span><span class="op">,</span>
            <span class="dt">isOk</span><span class="op">:</span> <span class="op">!</span><span class="dv">1</span><span class="op">,</span>
            <span class="dt">text</span><span class="op">:</span> <span class="st">"换个昵称试试?"</span><span class="op">,</span>
            <span class="dt">autoClose</span><span class="op">:</span> <span class="op">!</span><span class="dv">0</span>
        <span class="op">}</span>) : (<span class="dv">0</span><span class="op">,</span> <span class="va">h</span>.<span class="at">ShowToast</span>)(<span class="op">{</span>
            <span class="dt">key</span><span class="op">:</span> <span class="st">"empty"</span><span class="op">,</span>
            <span class="dt">type</span><span class="op">:</span> <span class="st">"center"</span><span class="op">,</span>
            <span class="dt">isOk</span><span class="op">:</span> <span class="op">!</span><span class="dv">1</span><span class="op">,</span>
            <span class="dt">text</span><span class="op">:</span> <span class="st">"操作失败，请重试"</span><span class="op">,</span>
            <span class="dt">autoClose</span><span class="op">:</span> <span class="op">!</span><span class="dv">0</span>
        <span class="op">}</span>)
<span class="op">}</span></code></pre></div>
<figure>
<img class="thumb" data-small="/blog/breaking_netease_manual/nemnbr-xhr-name-small.jpg" data-src="/blog/breaking_netease_manual/nemnbr-xhr-name.png" data-thumb="/blog/breaking_netease_manual/nemnbr-xhr-name-thumb.jpg" src="/blog/breaking_netease_manual/nemnbr-xhr-name-thumb.jpg" title="" width="644px"/>
<figcaption>
</figcaption>
</figure>
<p>你的名称会被提交到 <code>/api/activity/antispam/keyword/nickname/check</code> 以检查是否为恶意行为. 我们发现, 将名字提交的过程中, 个人信息是通过一个密钥加密的, 所以基本上可以认为避开了中间人攻击 (关键其实在于 SSL).</p>
<del>
笔者试了一个<strong>不文明用语</strong>名称然后 (按照预想地) 被提示换一个昵称 (捂脸)
</del>
<h3 id="在线-离线">在线 / 离线</h3>
<p>在分析网络活动的过程中我们也发现, 所有的资源都被分配到了网易的 CDN 上.</p>
<p>不过既然姓名要提交服务器审核那干嘛不顺带把结果也收回去, 至少在大数据时代多收集点信息, 可以优化一下<ruby>服务质量<rt>广告推送</rt></ruby>啊......</p>
<p>↑ 其实那个是应该签隐私协议的, 所以还不如不收集这个信息</p>
<p>事实上, 添加完昵称以后, 包括最后的图片生成在内的的整个流程全部是在本地做的.</p>
<h3 id="判定规则">判定规则</h3>
<p>在第 14312 到第 15103 行之间的代码描述了所有可能输出的判定, 并给了相应的规则.</p>
<p>然后依据直觉, 我们在第 13232 行找到了祖传的<ruby>麦斯 · 兰敦姆<rt> Math. random ()</rt></ruby> 大法, 成功通过这名 20 世纪末诞生的伟大数学家的大名找到了程序的奥妙所在 (弥天大雾)</p>
<figure>
<img class="thumb" data-small="/blog/breaking_netease_manual/nemnbr-rule-mathrandom-small.jpg" data-src="/blog/breaking_netease_manual/nemnbr-rule-mathrandom.png" data-thumb="/blog/breaking_netease_manual/nemnbr-rule-mathrandom-thumb.jpg" src="/blog/breaking_netease_manual/nemnbr-rule-mathrandom-thumb.jpg" title="随机大法好" width="1264px"/>
<figcaption>
随机大法好
</figcaption>
</figure>
<p>可以看出, 这里的规则和判定输出规则还是比较复杂的.</p>
<p>先试图定位到在函数中经常出现的一个邪恶家伙 <code>H</code>:</p>
<div class="sourceCode"><pre class="sourceCode js"><code class="sourceCode javascript"><span class="co">// Lines 15171 - 15181</span>
    <span class="va">t</span>.
<span class="im">default</span> <span class="op">=</span> <span class="op">{</span>
            <span class="dt">spec</span><span class="op">:</span> n<span class="op">,</span>
            <span class="dt">l1</span><span class="op">:</span> r<span class="op">,</span>
            <span class="dt">l2</span><span class="op">:</span> i<span class="op">,</span>
            <span class="dt">qss</span><span class="op">:</span> a<span class="op">,</span>
            <span class="dt">foodie</span><span class="op">:</span> o
        <span class="op">},</span>
    <span class="va">e</span>.<span class="at">exports</span> <span class="op">=</span> <span class="va">t</span>.
<span class="im">default</span>
}<span class="op">,</span></code></pre></div>
<p>这段代码将刚才的判定内容定义为 <code>H.default.spec</code>, 之后看到这一组关键字直接找到这里就可以了.</p>
<div class="sourceCode"><pre class="sourceCode js"><code class="sourceCode javascript"><span class="co">// Lines 13224 - 13226</span>
<span class="va">n</span>.<span class="at">forEach</span>(<span class="kw">function</span> (e) <span class="op">{</span>
        <span class="va">e</span>.<span class="at">a</span> <span class="op">===</span> t[<span class="va">e</span>.<span class="at">q</span> <span class="op">-</span> <span class="dv">1</span>].<span class="at">decent</span> <span class="op">?</span> r<span class="op">++</span> : <span class="va">e</span>.<span class="at">a</span> <span class="op">===</span> t[<span class="va">e</span>.<span class="at">q</span> <span class="op">-</span> <span class="dv">1</span>].<span class="at">foodie</span> <span class="op">&amp;&amp;</span> i<span class="op">++</span>
    <span class="op">}</span>)<span class="op">;</span></code></pre></div>
<p>上段代码直接表示了判分规则, 然后在下面找一下选取规则, 就有了下文的结论:</p>
<h3 id="获取题目">获取题目</h3>
<p>抓包完了很快就能定位到资源列表, 然后跑一波正则表达式</p>
<p>直接上爬虫 (人力 OCR 是真的累)</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="im">import</span> re
<span class="im">import</span> requests


<span class="cf">with</span> <span class="bu">open</span>(<span class="st">'po.txt'</span>, <span class="st">'r'</span>, encoding<span class="op">=</span><span class="st">'utf-8'</span>) <span class="im">as</span> f:
    ls <span class="op">=</span> f.read().split(<span class="st">'</span><span class="ch">\n</span><span class="st">'</span>)
<span class="cf">for</span> l <span class="op">in</span> ls:
    num, sel <span class="op">=</span> re.findall(<span class="vs">r'answer/(\d+)/(.)\.'</span>, l)[<span class="dv">0</span>]
    r <span class="op">=</span> requests.get(l)
    <span class="cf">with</span> <span class="bu">open</span>(<span class="st">'./out/</span><span class="sc">%s</span><span class="st">-</span><span class="sc">%s</span><span class="st">.png'</span> <span class="op">%</span> (num, sel), <span class="st">'wb'</span>) <span class="im">as</span> f:
        f.write(r.content)
    <span class="bu">print</span>(num, sel)</code></pre></div>
<h2 id="结论">结论</h2>
<h3 id="题目">题目</h3>
<p>一共有 16 道题, 每道题有一个正确答案 (大概是判定情商用的吧) 和一个吃货答案 (吃货答案选的数量超过一个值以后就会认为你是一个吃货), 具体在下表中呈现, 其中各列分别代表:</p>
<ul>
<li>index: 题目编号</li>
<li>decent: 正确答案, 留空代表没有 (没有也是醉了)</li>
<li>foodie: 吃货答案, 留空代表没有</li>
<li>A, B, C: 分别代表三个选项的内容</li>
</ul>
<table>
<thead>
<tr class="header">
<th>index</th>
<th>A</th>
<th>B</th>
<th>C</th>
<th>decent</th>
<th>foodie</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>水烧开了</td>
<td>三鲜麻辣鸳鸯锅</td>
<td>老巫婆熬制魔药</td>
<td>A</td>
<td>B</td>
</tr>
<tr class="even">
<td>2</td>
<td>酷炫的高档跑车</td>
<td>不遵守交通规则</td>
<td>变形金刚, 变身</td>
<td></td>
<td></td>
</tr>
<tr class="odd">
<td>3</td>
<td>上台前的紧张</td>
<td>生命的活力</td>
<td>暗恋的人出现</td>
<td>A</td>
<td></td>
</tr>
<tr class="even">
<td>4</td>
<td>温暖的篝火</td>
<td>危险的电火花</td>
<td>香喷喷的烤肉</td>
<td>B</td>
<td>C</td>
</tr>
<tr class="odd">
<td>5</td>
<td>故乡的离别</td>
<td>沿途的风景</td>
<td>拥挤的人潮</td>
<td>A</td>
<td></td>
</tr>
<tr class="even">
<td>6</td>
<td>定时炸弹</td>
<td>睡不着的夜晚</td>
<td>等待一个人</td>
<td>B</td>
<td></td>
</tr>
<tr class="odd">
<td>7</td>
<td>着急下班的员工</td>
<td>窃取机密的黑客</td>
<td>游戏中请勿打扰</td>
<td>A</td>
<td></td>
</tr>
<tr class="even">
<td>8</td>
<td>雨中浪漫约会</td>
<td>为行程延误忧愁</td>
<td>鞋子湿掉的难受</td>
<td>B</td>
<td></td>
</tr>
<tr class="odd">
<td>9</td>
<td>此起彼伏的海浪</td>
<td>洗衣机内心独白</td>
<td>胃在翻腾要吐了</td>
<td>A</td>
<td></td>
</tr>
<tr class="even">
<td>10</td>
<td>丛林里的流水声</td>
<td>谁水龙头忘关了</td>
<td>忍了很久的释放</td>
<td>A</td>
<td></td>
</tr>
<tr class="odd">
<td>11</td>
<td>树影斑驳的森林</td>
<td>清晨遛鸟的大爷</td>
<td>京中有善口技者</td>
<td>A</td>
<td></td>
</tr>
<tr class="even">
<td>12</td>
<td>夏天的风</td>
<td>浪漫的幻想</td>
<td>无忧无虑的童年</td>
<td>A</td>
<td></td>
</tr>
<tr class="odd">
<td>13</td>
<td>在珠峰顶上许愿</td>
<td>海上迎接暴风雨</td>
<td>迷失在荒芜沙漠</td>
<td>C</td>
<td></td>
</tr>
<tr class="even">
<td>14</td>
<td>在星际间冒险</td>
<td>藏着精灵的山谷</td>
<td>梦境中一片荒芜</td>
<td>C</td>
<td></td>
</tr>
<tr class="odd">
<td>15</td>
<td>天空有 UFO 飞过</td>
<td>孙悟空翻筋斗云</td>
<td>五毛特效</td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td>16</td>
<td>受伤心灵被治愈</td>
<td>一瞬间惊艳变身</td>
<td>考卷答案浮现</td>
<td>A</td>
<td></td>
</tr>
</tbody>
</table>
<h3 id="判分规则">判分规则</h3>
<p>小程序会给你计算两个参数, 分别代表 6 道题目中正确答案的数量和吃货答案的数量. 不妨设:</p>
<ul>
<li>adec: 正确答案数量</li>
<li>afoo: 吃货答案数量</li>
</ul>
<h3 id="输出内容">输出内容</h3>
<p>下表为所有的判定依据, 其中各列分别代表:</p>
<ul>
<li>index: 判定编号</li>
<li>val: 最后输出的内容, XXX 用他或她代替</li>
<li>level: 该类人群的情商级别</li>
<li>tag: 有些判定只适用于特殊人群, 值为空 / 吃货 / 幽默</li>
<li>fm: 选项适用的性别</li>
<li>not: 该项判定不能和编号为 <span class="math inline">\(\{x | x \in not\}\)</span> 的同时存在</li>
<li>r, candi: 有 r 的概率第二项和第三项都会从 candi 里抽选</li>
</ul>
<table>
<colgroup>
<col style="width: 4%"/>
<col style="width: 24%"/>
<col style="width: 4%"/>
<col style="width: 3%"/>
<col style="width: 3%"/>
<col style="width: 28%"/>
<col style="width: 3%"/>
<col style="width: 28%"/>
</colgroup>
<thead>
<tr class="header">
<th>index</th>
<th>val</th>
<th>level</th>
<th>tag</th>
<th>fm</th>
<th>not</th>
<th>r</th>
<th>candi</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>0</td>
<td>XXX 擅于发现美的事物, 并从中吸收能量, 变得越来越好看.</td>
<td>2</td>
<td></td>
<td>1</td>
<td></td>
<td>. 3</td>
<td></td>
</tr>
<tr class="even">
<td>1</td>
<td>XXX 笑起来像个孩子, 把他带在身边, 能带来青春永驻的效果.</td>
<td>2</td>
<td></td>
<td>0</td>
<td></td>
<td>. 3</td>
<td></td>
</tr>
<tr class="odd">
<td>2</td>
<td>请多给予 XXX 一点睡眠时间.</td>
<td>2</td>
<td></td>
<td>0</td>
<td>42, 45, 65, 64</td>
<td>. 3</td>
<td></td>
</tr>
<tr class="even">
<td>3</td>
<td>XXX 偶尔也有像天使一样温柔的时候.</td>
<td>2</td>
<td></td>
<td>0</td>
<td></td>
<td>. 3</td>
<td></td>
</tr>
<tr class="odd">
<td>4</td>
<td>XXX 喜欢自由, 适合经常带出去放养.</td>
<td>2</td>
<td></td>
<td>0</td>
<td>46</td>
<td>. 3</td>
<td></td>
</tr>
<tr class="even">
<td>5</td>
<td>肚子饿了就会心情不好, 带 XXX 一起去吃美味的食物吧!</td>
<td>2</td>
<td>吃</td>
<td>0</td>
<td>8, 37, 39, 43, 44, 51, 52, 13</td>
<td>. 3</td>
<td></td>
</tr>
<tr class="odd">
<td>6</td>
<td>XXX 常常给身边的人带来好运.</td>
<td>2</td>
<td></td>
<td>0</td>
<td></td>
<td>. 3</td>
<td></td>
</tr>
<tr class="even">
<td>7</td>
<td>XXX 因为太可爱了, 会令人陷入沉迷, 属于正常现象.</td>
<td>2</td>
<td></td>
<td>1</td>
<td>11</td>
<td>. 3</td>
<td></td>
</tr>
<tr class="odd">
<td>8</td>
<td>XXX 遇到香喷喷的东西就会变圆.</td>
<td>2</td>
<td>吃</td>
<td>0</td>
<td>5, 37, 39, 43, 44, 51, 52, 13</td>
<td>. 3</td>
<td></td>
</tr>
<tr class="even">
<td>9</td>
<td>可能因为材质特殊, XXX 对外界的攻击有折射能力.</td>
<td>2</td>
<td></td>
<td>0</td>
<td>61, 40</td>
<td>1</td>
<td>1, 2, 3, 4, 5, 6, 7, 8, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 24, 25, 26, 34</td>
</tr>
<tr class="odd">
<td>10</td>
<td>XXX 虽然经过多次更新迭代, 但依然有颗纯真的心.</td>
<td>2</td>
<td>幽默</td>
<td>0</td>
<td></td>
<td>. 3</td>
<td></td>
</tr>
<tr class="even">
<td>11</td>
<td>XXX 发光的时候, 可能会使对象产生短时眩晕, 使用时请注意.</td>
<td>2</td>
<td></td>
<td>0</td>
<td>7, 19</td>
<td>. 3</td>
<td></td>
</tr>
<tr class="odd">
<td>12</td>
<td>XXX 拥有迷之运气, 中乐透的实力异于常人.</td>
<td>2</td>
<td></td>
<td>0</td>
<td></td>
<td>. 3</td>
<td></td>
</tr>
<tr class="even">
<td>13</td>
<td>只要缘分到了, XXX 自己就会瘦下来.</td>
<td>2</td>
<td>吃</td>
<td>0</td>
<td>5, 8, 37, 39, 43, 44, 51, 52</td>
<td>. 3</td>
<td></td>
</tr>
<tr class="odd">
<td>14</td>
<td>XXX 拥有高性能大脑, 可快速运转, 但过度工作 (学习) 容易发热.</td>
<td>2</td>
<td>幽默</td>
<td>0</td>
<td>58</td>
<td>. 3</td>
<td></td>
</tr>
<tr class="even">
<td>15</td>
<td>XXX 买买买时会释放出强大气场, 胆子也会变大.</td>
<td>2</td>
<td></td>
<td>0</td>
<td></td>
<td>. 3</td>
<td></td>
</tr>
<tr class="odd">
<td>16</td>
<td>XXX 常常因为无法体验人类的乐趣而神伤.</td>
<td>2</td>
<td></td>
<td>0</td>
<td>24, 30, 31, 20</td>
<td>. 3</td>
<td></td>
</tr>
<tr class="even">
<td>17</td>
<td>XXX 是能带来元气和灵感的谜之吉祥物.</td>
<td>2</td>
<td></td>
<td>0</td>
<td></td>
<td>. 3</td>
<td></td>
</tr>
<tr class="odd">
<td>18</td>
<td>XXX 心心念念的梦, 会在某个不经意的时候实现.</td>
<td>2</td>
<td></td>
<td>0</td>
<td></td>
<td>. 3</td>
<td></td>
</tr>
<tr class="even">
<td>19</td>
<td>XXX 的光芒太耀眼, 但也不至于会刺瞎别人.</td>
<td>2</td>
<td></td>
<td>0</td>
<td>11</td>
<td>. 3</td>
<td></td>
</tr>
<tr class="odd">
<td>20</td>
<td>XXX 历经严苛质检品控, 是市面上难得一遇的珍品.</td>
<td>2</td>
<td></td>
<td>0</td>
<td>30, 33, 62, 35, 16</td>
<td>. 3</td>
<td></td>
</tr>
<tr class="even">
<td>21</td>
<td>只要对 XXX 倾注感情, 他就能成为最可靠的伙伴, 遇到危机可无限次召唤.</td>
<td>2</td>
<td></td>
<td>0</td>
<td></td>
<td>. 3</td>
<td></td>
</tr>
<tr class="odd">
<td>22</td>
<td>XXX 的出厂设定就是温暖的守护者, 也是周围人快乐和活力的源泉.</td>
<td>2</td>
<td>幽默</td>
<td>0</td>
<td></td>
<td>. 3</td>
<td></td>
</tr>
<tr class="even">
<td>23</td>
<td>XXX 有极为罕见的感官知觉, 对他说谎可不是明智之举.</td>
<td>2</td>
<td></td>
<td>0</td>
<td></td>
<td>1</td>
<td>1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 24, 25, 26, 34</td>
</tr>
<tr class="odd">
<td>24</td>
<td>XXX 装备了精准的探测仪, 能发觉并把握住人生中真正的机会.</td>
<td>2</td>
<td></td>
<td>0</td>
<td>33, 62, 35, 16</td>
<td>. 3</td>
<td></td>
</tr>
<tr class="even">
<td>25</td>
<td>XXX 能通过每次挑战完成升级, 获得更高的智慧和运气.</td>
<td>2</td>
<td></td>
<td>0</td>
<td></td>
<td>. 3</td>
<td></td>
</tr>
<tr class="odd">
<td>26</td>
<td>XXX 具备安全与稳定性, 是居家、旅行必备的小能手.</td>
<td>2</td>
<td></td>
<td>0</td>
<td></td>
<td>. 3</td>
<td></td>
</tr>
<tr class="even">
<td>27</td>
<td>XXX 能快速拆卸烦恼, 重新制作出充满乐趣和创造力的产物.</td>
<td>2</td>
<td>幽默</td>
<td>0</td>
<td></td>
<td>1</td>
<td>1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 24, 25, 26, 34</td>
</tr>
<tr class="odd">
<td>28</td>
<td>变态 (萌) 是 XXX 的常态.</td>
<td>2</td>
<td></td>
<td>0</td>
<td></td>
<td>1</td>
<td>1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 24, 25, 26, 34</td>
</tr>
<tr class="even">
<td>29</td>
<td>保温杯和泡脚桶, 可延长 XXX 的使用寿命.</td>
<td>2</td>
<td>幽默</td>
<td>0</td>
<td></td>
<td>1</td>
<td>1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 24, 25, 26, 34</td>
</tr>
<tr class="odd">
<td>30</td>
<td>XXX 偶尔会孤单, 但也能享受孤单, 是一款自由的产品.</td>
<td>2</td>
<td>幽默</td>
<td>0</td>
<td>33, 62, 35, 16</td>
<td>1</td>
<td>1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 17, 18, 19, 20, 21, 22, 24, 25, 26, 34</td>
</tr>
<tr class="even">
<td>31</td>
<td>XXX 对时间的感知力弱, 所以不知不觉又加班了.</td>
<td>2</td>
<td></td>
<td>0</td>
<td>33, 62, 35, 16</td>
<td>1</td>
<td>1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 17, 18, 19, 20, 21, 22, 24, 25, 26, 34</td>
</tr>
<tr class="odd">
<td>32</td>
<td>XXX 拥有读气氛的技巧和超高感知力, 自己却毫无察觉.</td>
<td>2</td>
<td></td>
<td>0</td>
<td></td>
<td>. 3</td>
<td></td>
</tr>
<tr class="even">
<td>33</td>
<td>XXX 是怪人, 但接触后会很有趣, 一款来自外星的产品.</td>
<td>2</td>
<td>幽默</td>
<td>0</td>
<td>20, 30, 31, 24</td>
<td>. 3</td>
<td></td>
</tr>
<tr class="odd">
<td>34</td>
<td>XXX 听到喜爱的音乐, 就能触发运气开挂的效果.</td>
<td>2</td>
<td></td>
<td>0</td>
<td></td>
<td>. 3</td>
<td></td>
</tr>
<tr class="even">
<td>35</td>
<td>XXX 还在努力融入人类世界, 拥有地球人不具备的思维方式.</td>
<td>1</td>
<td>幽默</td>
<td>0</td>
<td>24, 30, 31, 20</td>
<td>. 3</td>
<td></td>
</tr>
<tr class="odd">
<td>36</td>
<td>XXX 肯花费大量时间和精力, 超出预期的完成任务.</td>
<td>1</td>
<td></td>
<td>0</td>
<td></td>
<td>. 3</td>
<td></td>
</tr>
<tr class="even">
<td>37</td>
<td>要定期给予 XXX 喂食, 他相当单纯.</td>
<td>1</td>
<td>吃</td>
<td>0</td>
<td>5, 8, 39, 43, 44, 51, 52, 13</td>
<td>. 3</td>
<td></td>
</tr>
<tr class="odd">
<td>38</td>
<td>请用纤细的语调对 XXX 说话吧.</td>
<td>1</td>
<td>幽默</td>
<td>0</td>
<td>43, 44, 42, 30, 61, 47, 49, 55, 57, 45</td>
<td>. 3</td>
<td></td>
</tr>
<tr class="even">
<td>39</td>
<td>如果做事开始慢腾腾, 及时给 XXX 一点吃的.</td>
<td>1</td>
<td>吃</td>
<td>0</td>
<td>5, 8, 37, 43, 44, 51, 52, 13</td>
<td>. 3</td>
<td></td>
</tr>
<tr class="odd">
<td>40</td>
<td>XXX 如果发生故障, 就给他一个拥抱吧.</td>
<td>1</td>
<td></td>
<td>0</td>
<td>61, 9</td>
<td>. 3</td>
<td></td>
</tr>
<tr class="even">
<td>41</td>
<td>XXX 喜欢被夸奖, 所以一天表扬他一次吧.</td>
<td>1</td>
<td></td>
<td>0</td>
<td></td>
<td>. 3</td>
<td></td>
</tr>
<tr class="odd">
<td>42</td>
<td>XXX 一困就会情绪低落, 请给予他适当的睡眠时间.</td>
<td>1</td>
<td></td>
<td>0</td>
<td>43, 44, 30, 61, 38, 47, 49, 55, 57, 45, 2, 65, 64</td>
<td>. 3</td>
<td></td>
</tr>
<tr class="even">
<td>43</td>
<td>XXX 即使心情低落, 也会保持精神, 这时候给他送些点心吧.</td>
<td>1</td>
<td>吃</td>
<td>0</td>
<td>44, 42, 30, 61, 38, 47, 49, 55, 57, 45, 5, 8, 37, 39, 51, 52, 13</td>
<td>. 3</td>
<td></td>
</tr>
<tr class="odd">
<td>44</td>
<td>XXX 心情不好的时候, 给他吃一点甜甜的东西吧!</td>
<td>1</td>
<td>吃</td>
<td>0</td>
<td>42, 30, 61, 38, 47, 49, 55, 57, 45, 5, 8, 37, 39, 51, 52, 13, 43</td>
<td>. 3</td>
<td></td>
</tr>
<tr class="even">
<td>45</td>
<td>XXX 最大的兴趣就是睡觉.</td>
<td>1</td>
<td></td>
<td>0</td>
<td>2, 42, 65, 43, 44, 42, 30, 61, 38, 47, 49, 55, 57, 64</td>
<td>. 3</td>
<td></td>
</tr>
<tr class="odd">
<td>46</td>
<td>XXX 能带给你更神奇的经历...... 当你带他出去玩的时候.</td>
<td>1</td>
<td></td>
<td>0</td>
<td>4</td>
<td>. 3</td>
<td></td>
</tr>
<tr class="even">
<td>47</td>
<td>XXX 看着对方眼睛说话就会脸红.</td>
<td>1</td>
<td></td>
<td>0</td>
<td>43, 44, 42, 30, 61, 38, 49, 55, 57, 45</td>
<td>. 3</td>
<td></td>
</tr>
<tr class="odd">
<td>48</td>
<td>XXX 对气温变化的感知力很弱, 可能因为内心一直是暖的.</td>
<td>1</td>
<td></td>
<td>0</td>
<td>50</td>
<td>. 3</td>
<td></td>
</tr>
<tr class="even">
<td>49</td>
<td>XXX 脑子里塞满天真的幻想, 能拍成一部高分动画片.</td>
<td>1</td>
<td></td>
<td>0</td>
<td>43, 44, 42, 30, 61, 38, 47, 55, 57, 45</td>
<td>. 3</td>
<td></td>
</tr>
<tr class="odd">
<td>50</td>
<td>XXX 遇到寒冷的温度就会变圆.</td>
<td>1</td>
<td></td>
<td>0</td>
<td>48, 5, 8, 37, 39, 43, 44, 51, 52, 13</td>
<td>. 3</td>
<td></td>
</tr>
<tr class="even">
<td>51</td>
<td>XXX 吃越少, 越会变胖</td>
<td>1</td>
<td>吃</td>
<td>0</td>
<td>5, 8, 37, 39, 43, 44, 52, 13</td>
<td>. 3</td>
<td></td>
</tr>
<tr class="odd">
<td>52</td>
<td>吃饭也是 XXX 缓解压力的一种办法</td>
<td>1</td>
<td>吃</td>
<td>0</td>
<td>5, 8, 37, 39, 43, 44, 51, 13</td>
<td>. 3</td>
<td></td>
</tr>
<tr class="even">
<td>53</td>
<td>XXX 易燃, 需要时刻为他准备好灭火器.</td>
<td>1</td>
<td>幽默</td>
<td>0</td>
<td>43, 44, 42, 30, 61, 38, 47, 49, 55, 57, 45</td>
<td>. 3</td>
<td></td>
</tr>
<tr class="odd">
<td>54</td>
<td>XXX 拥有巨大内存, 收到的关心 (和红包) 他都会记得.</td>
<td>1</td>
<td>幽默</td>
<td>0</td>
<td></td>
<td>. 3</td>
<td></td>
</tr>
<tr class="even">
<td>55</td>
<td>如果丢开 XXX 不管, 要小心他自己溜走了!</td>
<td>1</td>
<td>幽默</td>
<td>0</td>
<td>43, 44, 42, 30, 61, 38, 47, 49, 57, 45</td>
<td>. 3</td>
<td></td>
</tr>
<tr class="odd">
<td>56</td>
<td>未来的道路上, XXX 会因为无敌而略感寂寞.</td>
<td>1</td>
<td></td>
<td>0</td>
<td></td>
<td>. 3</td>
<td></td>
</tr>
<tr class="even">
<td>57</td>
<td>XXX 不擅长向别人求助. 如果有人察觉到的话请主动帮他一下.</td>
<td>1</td>
<td>幽默</td>
<td>0</td>
<td>43, 44, 42, 30, 61, 38, 47, 49, 55, 45</td>
<td>. 3</td>
<td></td>
</tr>
<tr class="odd">
<td>58</td>
<td>XXX 的脑部为 S 级原装货, 其他身体部分都是普通零件.</td>
<td>1</td>
<td>幽默</td>
<td>0</td>
<td>14</td>
<td>. 3</td>
<td></td>
</tr>
<tr class="even">
<td>59</td>
<td>如果你觉得 XXX 发量开始减少, 那一定是出现了幻觉.</td>
<td>1</td>
<td></td>
<td>0</td>
<td></td>
<td>. 3</td>
<td></td>
</tr>
<tr class="odd">
<td>60</td>
<td>XXX 只要一出门就会变漂亮.</td>
<td>1</td>
<td></td>
<td>1</td>
<td></td>
<td>. 3</td>
<td></td>
</tr>
<tr class="even">
<td>61</td>
<td>XXX 遇到刮痕损伤不会自己修理.</td>
<td>1</td>
<td>幽默</td>
<td>0</td>
<td>9, 40, 43, 44, 42, 30, 38, 47, 49, 55, 57, 45</td>
<td>. 3</td>
<td></td>
</tr>
<tr class="odd">
<td>62</td>
<td>XXX 对地球充满好奇, 喜欢人类 (不工作时) 的生活方式.</td>
<td>1</td>
<td>幽默</td>
<td>0</td>
<td>24, 30, 31, 20</td>
<td>. 3</td>
<td></td>
</tr>
<tr class="even">
<td>63</td>
<td>XXX 只要开启降噪模式, 就能获得坚定追随内心和直觉的勇气.</td>
<td>1</td>
<td></td>
<td>0</td>
<td></td>
<td>. 3</td>
<td></td>
</tr>
<tr class="odd">
<td>64</td>
<td>XXX 早上起床时容易发生爆炸.</td>
<td>1</td>
<td>幽默</td>
<td>0</td>
<td>2, 42, 45, 65</td>
<td>. 3</td>
<td></td>
</tr>
<tr class="even">
<td>65</td>
<td>XXX 按时睡觉的程序被设计的太复杂, 很难执行.</td>
<td>1</td>
<td>幽默</td>
<td>0</td>
<td>2, 42, 45, 64</td>
<td>. 3</td>
<td></td>
</tr>
</tbody>
</table>
<p>以上的判定被分为三类 (有交集), 分别为:</p>
<table style="width:88%;">
<colgroup>
<col style="width: 9%"/>
<col style="width: 20%"/>
<col style="width: 56%"/>
</colgroup>
<thead>
<tr class="header">
<th>index</th>
<th>desc</th>
<th>val</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>L1</td>
<td>所有 level 为 1 的</td>
<td>35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61, 62, 63, 64, 65</td>
</tr>
<tr class="even">
<td>L2</td>
<td>所有 level 为 2 的</td>
<td>0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34</td>
</tr>
<tr class="odd">
<td>Foodie</td>
<td>标签为<em>吃</em>的</td>
<td>5, 8, 37, 39, 43, 44, 51, 52, 13, 48, 50</td>
</tr>
</tbody>
</table>
<h3 id="生成流程">生成流程</h3>
<p><strong>第一条:</strong> 程序会从 L2 中不断随机选取判定直到满足以下两条件之中至少一个:</p>
<ol type="1">
<li>当正确答案数 adec 不少于 5 个时, 判定标签为 “幽默” 的判定</li>
<li>该项 fm 值为 1 且用户性别为女的判定</li>
</ol>
<p><strong>第二条:</strong> 程序会以一定的概率分配从以下分组中选取:</p>
<ol type="1">
<li>若第一条的 candi 非空, 则有 r 的概率 (通常为 0. 3) 直接从 candi 中取</li>
<li>当吃货答案数 afoo 不少于 1 个时, 有 0. 7 的概率从 Foodie 中取</li>
<li>有 0. 2 的概率将从 L1 中取</li>
<li>剩下的一定取自 L2</li>
</ol>
<p>随机取出的判定应满足以下判定:</p>
<ol type="1">
<li>和第一条天生不冲突 (互不在对方的 not 集合中), 也不相同的判定</li>
<li>当正确答案数 adec 不少于 5 个时, 判定标签为 “幽默” 的判定</li>
<li>该项 fm 值为 1 且用户性别为女的判定</li>
</ol>
<p><strong>第三条:</strong> 程序会以一定的概率分配从以下分组中选取:</p>
<ol type="1">
<li>若第一条的 candi 非空, 则有 r 的概率 (通常为 0. 3) 直接从 candi 中取 (该事件与第二条的事件相互独立)</li>
<li>有 0. 5 的概率将从 L1 中取</li>
<li>剩下的一定取自 L2</li>
</ol>
<p>随机取出的判定规则基本与第二条的规则相似.</p>
<h3 id="最终输出">最终输出</h3>
<p>随机几个背景颜色然后堆一个 canvas 出来, 由本地生成一个 data blob 显示到屏幕上. 其中还需要做一点小小的替换, 不过都无所谓了.</p>
<h2 id="吐槽">吐槽</h2>
<p>不得不说这个小程序写得还是比较有意思的. 但是其实这类分享类应用基本套路都一样, 后面是不是有批量生成器都不是很好说.</p>
<p>通过我们严密的分析, 发现在前面 6 道题内做的选择与最后具体的结果几乎没有关系. 于是并不像我们所预想之程序员真正兢兢业业地把每个性格的特点写在代码里, 反而是偷懒地使用<ruby>麦斯 · 兰敦姆<rt> Math. random ()</rt></ruby> 大法来掩盖自己没好好写代码的事实 (笑).</p>
<p>另外代码里各种神奇的操作, 比如用 <code>!0</code> 代替 <code>true</code> 一类的, 抑或是用 <code>for</code> 或者 lazy evaluation 强行缩行...... 或许这些都是业界常态但是我太 naive 没看到吧.</p>
<p>之前看 <span class="citation" data-cites="xmcp"> @xmcp</span> 分析的另一个朋友圈刮风小程序, 大抵也是相同的套路. 考虑到这次作者读代码读到吐的情况, 下次也许对这类事情我就敬而远之了吧.</p>
<figure>
<img class="thumb" data-small="/blog/breaking_netease_manual/nemnbr-hyouka-small.jpg" data-src="/blog/breaking_netease_manual/nemnbr-hyouka.jpg" data-thumb="/blog/breaking_netease_manual/nemnbr-hyouka-thumb.jpg" src="/blog/breaking_netease_manual/nemnbr-hyouka-thumb.jpg" title="「氷菓」夕べには骸に" width="1920px"/>
<figcaption>
「氷菓」夕べには骸に
</figcaption>
</figure>
<p>总之, 占卜这种玩意儿, 顶多是学园祭的特色, 若是在日常生活中出现, 大家便也娱乐一下就好, 切勿当真~</p>

      </div>
      <div class="post-footer">
        <span class="share">
          <i class="fa fa-share-alt"></i>share to:
          <a href="https://www.facebook.com/sharer/sharer.php?u=https://jeffswt.org//blog/breaking_netease_manual/"><i class="fa fa-facebook"></i>facebook</a>
          <a href="https://twitter.com/intent/tweet?text=https://jeffswt.org//blog/breaking_netease_manual/"><i class="fa fa-twitter"></i>twitter</a>
          <a href="https://plus.google.com/share?url=https://jeffswt.org//blog/breaking_netease_manual/"><i class="fa fa-google-plus"></i>google+</a>
          <a href="https://www.reddit.com/submit?url=https://jeffswt.org//blog/breaking_netease_manual/"><i class="fa fa-reddit"></i>reddit</a>
        </span>
        <hr />
      </div>
    </div>
    <div id="comments-section" data-id="breaking_netease_manual">
    </div>
  </div>
  <div class="page-footer">
    <center><span class="copyright">
      &copy; 2017 jeffswt, all rights reserved.
    </span></center>
  </div>

  <script type="text/javascript" src="/assets/katex/katex.js"></script>
  <script type="text/javascript" src="/assets/katex/contrib/auto-render.js"></script>
  <script type="text/javascript" src="/assets/gitment/gitment.js"></script>
  <script type="text/javascript" src="/assets/main.js"></script>

  <div hidden="hidden">
    <script type="text/javascript" src="https://s11.cnzz.com/z_stat.php?id=1261583208&web_id=1261583208"></script>
  </div>
</body>
</html>
